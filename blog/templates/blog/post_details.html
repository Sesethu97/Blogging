{% extends 'base.html' %}
{% block title %}{{ post.title_tag}}{% endblock %}

{% block content %}

<h1>{{ post.title }} </h1>
<small>By: {{ post.author}} - {{ post.post_date}}
    {% if user.is_authenticated %}
    {% if user.id == post.author.id %}

    -<a href="{% url 'blog:update_post' pk=post.pk %}">Edit</a>
    <a href="{% url 'blog:delete_post' pk=post.pk %}">Delete</a>

    {% endif %}
    {% endif %}

</small><br />
<hr>
<br />
{% if post.header_image%}
<img src="{{ post.header_image.url}}"><br /><br />
{% endif %}
{{ post.body|safe }}
<br /><br />
<a href="{% url 'blog:home' %}" class="btn btn-secondary">Back</a>
<br /><br />
<hr>
<br />
<form action="{% url 'blog:like_post' pk=post.pk %}" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated %}

    {% if liked%}
    <button type="submit" , class="btn btn-danger btn-sm" , name="post_id" , value="{{ post.id }}"> UnLike</button>
    {% else %}
    <button type="submit" , class="btn btn-primary btn-sm" , name="post_id" , value="{{ post.id }}"> Like</button>
    {% endif %}
    {% else %}
    <small><a href="{% url 'users:login' %}">Login to Like</small></a>
    {% endif %}

    - {{ total_likes}} like
</form>

<hr>
<br />
<form action="{% url 'blog:dislike_post' pk=post.pk %}" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated %}

    {% if disliked %}

    <button type="submit" , class="btn btn-danger btn-sm" , name="post_id" , value="{{ post.id }}"> unDislike</button>
    {% else %}
    <button type="submit" , class="btn btn-primary btn-sm" , name="post_id" , value="{{ post.id }}"> Dislike</button>

    {% endif %}
    {% else %}
    <small><a href="{% url 'users:login' %}">Login to Dislike</small></a>
    {% endif %}

    - {{ total_dislikes}} Dislike
</form>
{% endblock %}