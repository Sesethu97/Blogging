{% extends 'base.html' %}
{% block content %}

{% if messages %}
{% for message in messages %}
<div id="msg">{{ message }}</div>
{% endfor %}
{% endif %}


<h1>Post</h1>
<ul>
    {% for post in object_list %}
    <li><a href="{% url 'blog:post_details' pk=post.pk %}">
            {{ post.title }}</a>
        - <a href="{% url 'blog:category_post' post.category|slugify %}">{{ post.category }}</a>
        - {{ post.author }} - {{ post.post_date}}
        <small>
            {% if user.is_authenticated %}
            {% if user.id == post.author.id %}

            -<a href="{% url 'blog:update_post' pk=post.pk %}">Edit</a>
            <a href="{% url 'blog:delete_post' pk=post.pk %}">Delete</a>
            {% endif %}
            {% endif %}
        </small><br />
        {{ post.snippet }}
    </li>
    {% endfor %}
</ul>

{% endblock %}

{% block scripts %}
<script defer>
    const msg = document.getElementById("msg")
    setTimeout(function () {
        msg.style.display = "none";
    }, 3000);

</script>
{% endblock %}